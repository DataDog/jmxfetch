dist: precise

language: java

install: echo "do nada"

addons:
  hostname: dd-jmxfetch-testhost
  apt:
    packages:
      - openjdk-6-jdk

matrix:
  fast_finish: true
  include:
    - jdk: oraclejdk8
      env:
       - DESC="Oracle JDK8 linting"
       - TESTCMD="mvn verify -B -Dhttps.protocols=TLSv1.2 -DskipTests -Dlog4j.configuration=log4j.travis.properties"

    - jdk: oraclejdk8
      env:
       - DESC="Oracle JDK8 testing"
       - BUILDCMD="mvn install -Dhttps.protocols=TLSv1.2 -DskipTests=true -Dmaven.javadoc.skip=true -B -V"
       - TESTCMD="mvn test -B -Dhttps.protocols=TLSv1.2 -Dcheckstyle.skip=true -Dlog4j.configuration=log4j.travis.properties"

    - jdk: oraclejdk7
      env:
       - DESC="Oracle JDK7 testing"
       - BUILDCMD="mvn install -Dhttps.protocols=TLSv1.2 -DskipTests=true -Dmaven.javadoc.skip=true -B -V"
       - TESTCMD="mvn test -B -Dhttps.protocols=TLSv1.2 -Dcheckstyle.skip=true -Dlog4j.configuration=log4j.travis.properties"

    - jdk: openjdk7
      env:
       - DESC="OpenJDK7 testing"
       - BUILDCMD="mvn install -Dhttps.protocols=TLSv1.2 -DskipTests=true -Dmaven.javadoc.skip=true -B -V"
       - TESTCMD="mvn test -B -Dhttps.protocols=TLSv1.2 -Dcheckstyle.skip=true -Dlog4j.configuration=log4j.travis.properties"

    - jdk: openjdk6
      env:
       - DESC="OpenJDK6 testing"
       # TLSv1.2 fails
       #
       # - BUILDCMD="mvn install -Dhttps.protocols=TLSv1,TLSv1.1 -DskipTests=true -Dmaven.javadoc.skip=true -B -V"
       - TESTCMD="mvn test -B -Dhttps.protocols=TLSv1,TLSv1.1 -Dcheckstyle.skip=true -Dlog4j.configuration=log4j.travis.properties"

script:
  - echo "Running $DESC..."
  - if [[ ! -z "${BUILDCMD}" ]]; then (eval $BUILDCMD); fi
  - if [[ ! -z "${TESTCMD}" ]]; then (eval $TESTCMD); fi

